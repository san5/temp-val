<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Will You Be My Valentine? ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    overflow:hidden;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(#ffdde1,#ee9ca7);
    text-align:center;
    color:#fff;
}

#gameArea{
    position:relative;
    width:100vw;
    height:100vh;
}

.heart{
    position:absolute;
    font-size:24px;
    animation: fall linear forwards;
}

@keyframes fall{
    to{ transform: translateY(100vh); }
}

#basket{
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    font-size:42px;
    transition:left .05s;
}

#meterBox{
    position:absolute;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    width:70%;
    height:26px;
    background:#ffffff55;
    border-radius:20px;
    overflow:hidden;
}

#meter{
    height:100%;
    width:0%;
    background:#ff4d6d;
    transition:width .25s;
}

#proposal{
    display:none;
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:white;
    color:#333;
    padding:40px;
    border-radius:20px;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
    width:80%;
    max-width:320px;
}

button{
    padding:12px 25px;
    margin:12px;
    font-size:18px;
    border:none;
    border-radius:10px;
    cursor:pointer;
}

#yes{ background:#ff4d6d; color:white; }
#no{ background:#ccc; position:relative; }

#final{
    display:none;
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:34px;
    width:80%;
    animation:fadeIn 1.5s forwards;
}

@keyframes fadeIn{
    from{opacity:0; transform:translate(-50%,-60%);}
    to{opacity:1; transform:translate(-50%,-50%);}
}
</style>
</head>

<body>

<div id="gameArea">

    <div id="meterBox"><div id="meter"></div></div>
    <div id="basket">üß∫</div>

    <div id="proposal">
        <h2>Will you be my Valentine? ‚ù§Ô∏è</h2>
        <button id="yes">Yes üíñ</button>
        <button id="no">No üôà</button>
    </div>

    <div id="final">
        üíï Yay! You just made my world brighter üíï<br><br>
        I promise to keep catching your heart forever ‚ù§Ô∏è
    </div>

</div>

<script>
const gameArea = document.getElementById("gameArea");
const basket = document.getElementById("basket");
const meter = document.getElementById("meter");
const proposal = document.getElementById("proposal");
const final = document.getElementById("final");
const noBtn = document.getElementById("no");

let score = 0;
let maxScore = 15;
let running = true;

/* -------- Basket movement (mobile friendly) -------- */
function moveBasket(x){
    const w = basket.offsetWidth;
    let pos = x - w/2;
    if(pos < 0) pos = 0;
    if(pos > window.innerWidth - w) pos = window.innerWidth - w;
    basket.style.left = pos + "px";
}

document.addEventListener("mousemove", e=>{
    moveBasket(e.clientX);
});

document.addEventListener("touchmove", e=>{
    moveBasket(e.touches[0].clientX);
},{passive:true});

/* -------- Spawn hearts -------- */
function spawnHeart(){
    if(!running) return;

    const heart = document.createElement("div");
    heart.className="heart";
    heart.innerText="‚ù§Ô∏è";
    heart.style.left=Math.random()*window.innerWidth+"px";
    heart.style.top="-30px";
    heart.style.animationDuration=(3+Math.random()*2)+"s";
    gameArea.appendChild(heart);

    const check=setInterval(()=>{
        const h=heart.getBoundingClientRect();
        const b=basket.getBoundingClientRect();

        if(
            h.bottom>=b.top &&
            h.left<b.right &&
            h.right>b.left
        ){
            heart.remove();
            clearInterval(check);
            score++;

            meter.style.width=(score/maxScore*100)+"%";

            if(score>=maxScore){
                running=false;
                setTimeout(()=>proposal.style.display="block",400);
            }
        }

        if(h.top>window.innerHeight){
            heart.remove();
            clearInterval(check);
        }
    },40);
}

setInterval(spawnHeart,800);

/* -------- Moving NO button üòÜ -------- */
noBtn.addEventListener("mouseover",moveNo);
noBtn.addEventListener("touchstart",moveNo);

function moveNo(){
    const x=Math.random()*200-100;
    const y=Math.random()*150-75;
    noBtn.style.transform=`translate(${x}px,${y}px)`;
}

/* -------- YES clicked -------- */
document.getElementById("yes").onclick=()=>{
    proposal.style.display="none";
    final.style.display="block";
    heartRain();
};

/* -------- Romantic heart rain -------- */
function heartRain(){
    setInterval(()=>{
        const h=document.createElement("div");
        h.className="heart";
        h.innerText="üíñ";
        h.style.left=Math.random()*window.innerWidth+"px";
        h.style.animationDuration="4s";
        gameArea.appendChild(h);
        setTimeout(()=>h.remove(),4000);
    },180);
}
</script>

</body>
</html>
